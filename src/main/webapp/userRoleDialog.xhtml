<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>#{userRoleDialogBean.mode} a UserRole</title>
    </h:head>
    <h:body>

        <h:form>
            <p:focus />
            <p:growl globalOnly="true" showDetail="true" />

            <h:panelGroup rendered="#{userRoleDialogBean.mode eq 'Add' }" >

                <h3>For #{(userRoleDialogBean.byOption eq 'U' ? 'User: ' : 'Role: ') += userRoleDialogBean.optionName}</h3>

                <h:panelGroup rendered="#{userRoleDialogBean.byOption eq 'U'}" >
                    <p:outputLabel for="@next" value="#{userRoleDialogBean.choiceLabel}" />
                    <p:selectOneMenu value="#{userRoleDialogBean.selectedRoleChoice}"
                                     filter="true" filterMatchMode="contains" required="true"
                                     converter="omnifaces.SelectItemsConverter">
                        <f:selectItem noSelectionOption="true" itemLabel="Select one..." itemValue="#{null}" />
                        <f:selectItems value="#{userRoleDialogBean.roleChoices}" var="role"
                                       itemLabel="#{role.name}"
                                       itemValue="#{role}" />
                        <p:ajax update="@this @next"/>
                    </p:selectOneMenu>
                    <p:message for="@previous" />
                </h:panelGroup>

                <h:panelGroup rendered="#{userRoleDialogBean.byOption eq 'R'}" >
                    <p:outputLabel for="@next" value="#{userRoleDialogBean.choiceLabel}" />
                    <p:selectOneMenu value="#{userRoleDialogBean.selectedUserChoice}"
                                     filter="true" filterMatchMode="contains" required="true"
                                     converter="omnifaces.SelectItemsConverter">
                        <f:selectItem noSelectionOption="true" itemLabel="Select one..." itemValue="#{null}" />
                        <f:selectItems value="#{userRoleDialogBean.userChoices}" var="user"
                                       itemLabel="#{user.name}" 
                                       itemValue="#{user}" />
                        <p:ajax update="@this @next"/>
                    </p:selectOneMenu>
                    <p:message for="@previous" />
                </h:panelGroup>

            </h:panelGroup>


            <br/>
            <br/>
            <p:commandButton icon="pi pi-check" value="Add" title="add the new userRole" 
                             action="#{userRoleDialogBean.addUserRole}"
                             update="@form"
                             rendered="#{userRoleDialogBean.mode eq 'Add'}"/>


            <p:panelGrid columns="3" styleClass="ui-noborder" 
                         rendered="#{userRoleDialogBean.mode eq 'Delete' 
                                     or userRoleDialogBean.mode eq 'View'}">
                <f:facet name="header" >Membership</f:facet>
                <h:outputText value="User" style="text-decoration: underline;font-weight: bold;"/>
                <h:outputText value=" " />
                <h:outputText value="Role" style="text-decoration: underline;font-weight: bold;"/>

                <h:outputText value="#{userRoleDialogBean.userRole.user.name}"/>
                <h:outputText value=" &lt;---&gt; "/>
                <h:outputText value="#{userRoleDialogBean.userRole.role.name}"/>

            </p:panelGrid>


            <br/>
            <p:commandButton icon="pi pi-trash" value="Delete" title="delete the userRole" 
                             rendered="#{userRoleDialogBean.mode eq 'Delete'}"
                             action="#{userRoleDialogBean.deleteUserRole}"
                             update="@form" />

        </h:form>

    </h:body>
</html>

